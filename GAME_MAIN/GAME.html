<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>くらべるファーム｜卒業研究</title>
    <link rel="icon" href="Images/icon.png">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/farm.css">
    <link rel="stylesheet" href="CSS/market.css">
</head>
<body>

    <div id="slide-container">
        <div id="game-header">
            <div id="title-box" class="ui-box">くらべるファーム</div>
            <div id="date-box" class="ui-box">1ヶ月 目 春</div>
            <div id="gold-box" class="ui-box">1000 円</div>
            <button id="option-box" class="ui-box"></button>
        </div>

        <div id="main-content">
            <div id="farm-area">
                <div
                    style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <button id="farm-button" class="action-button">しゅうかく</button>
                    <button id="next-month-button" class="action-button">次の月へ</button>
                </div>
                <div id="farm-box">
                </div>
            </div>

            <div id="side-panel-wrapper">
                <div id="side-panel-tabs">
                    <button id="tab-market" class="tab-button active">マーケット</button>
                    <button id="tab-note" class="tab-button">ノート</button>
                    <button id="tab-price" class="tab-button">ねだん</button>
                </div>
                <div id="side-panel-content">

                    <div id="content-market" class="tab-content active">
                        <div class="side-panel-box">
                            <div class="item-grid">
                                <button id="seed-button-lettuce" class="item-slot action-button">
                                    レタス 🥬<br>
                                    買うねだん: 50 円<br>
                                    しゅうかくまで: 1ヶ月<br>
                                    <span id="market-price-lettuce">今の売るねだん: --- 円</span>
                                    <div class="market-button action-button">このたねをうえる</div>
                                </button>
                                <button id="seed-button-carot" class="item-slot action-button">
                                    ニンジン 🥕<br>
                                    買うねだん: 100 円<br>
                                    しゅうかくまで: 2ヶ月<br>
                                    <span id="market-price-carrot">今の売るねだん: --- 円</span>
                                    <div class="market-button action-button">このたねをうえる</div>
                                </button>
                                <button id="seed-button-tomato" class="item-slot action-button">
                                    トマト 🍅<br>
                                    買うねだん: 120 円<br>
                                    しゅうかくまで: 3ヶ月<br>
                                    <span id="market-price-tomato">今の売るねだん: --- 円</span>
                                    <div class="market-button action-button">このたねをうえる</div>
                                </button>
                                <button id="seed-button-onion" class="item-slot action-button">
                                    タマネギ 🧅<br>
                                    買うねだん: 150 円<br>
                                    しゅうかくまで: 4ヶ月<br>
                                    <span id="market-price-onion">今の売るねだん: --- 円</span>
                                    <div class="market-button action-button">このたねをうえる</div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="content-note" class="tab-content">
                        <div class="side-panel-box" style="flex-direction: column; justify-content: flex-start;">

                            <button id="hint-button" class="action-button"
                                style="width: 90%; margin-bottom: 10px; background-color: #f39c12; font-size: 1.2rem; box-shadow: 0 4px 0 #d35400;">
                                💡 計算のヒントを見る
                            </button>

                            <div class="item-grid" style="height: 85%;">
                                <div class="item-slot note-slot">
                                    <h4>レタス 🥬</h4>
                                    <p>ねだんが大きく変わる！</p>
                                    <p>
                                        買うねだん: 50 円<br>
                                        しゅうかくまで: 1ヶ月</p>
                                    <p id="note-price-lettuce">今の売るねだん：--- 円</p>
                                    <textarea class="memo-note" placeholder="メモや計算をしよう！"></textarea>
                                </div>
                                <div class="item-slot note-slot">
                                    <h4>ニンジン 🥕</h4>
                                    <p>いちばん安定！</p>
                                    <p>
                                        買うねだん: 100 円<br>
                                        しゅうかくまで: 2ヶ月</p>
                                    <p id="note-price-carrot">今の売るねだん：--- 円</p>
                                    <textarea class="memo-note" placeholder="メモや計算をしよう！"></textarea>
                                </div>
                                <div class="item-slot note-slot">
                                    <h4>トマト 🍅</h4>
                                    <p>ねだんが下がりやすいかも</p>
                                    <p>
                                        買うねだん: 120 円<br>
                                        しゅうかくまで: 3ヶ月</p>
                                    <p id="note-price-tomato">今の売るねだん：--- 円</p>
                                    <textarea class="memo-note" placeholder="メモや計算をしよう！"></textarea>
                                </div>
                                <div class="item-slot note-slot">
                                    <h4>タマネギ 🧅</h4>
                                    <p>ゆっくり安全に！</p>
                                    <p>
                                        買うねだん: 150 円<br>
                                        しゅうかくまで: 4ヶ月</p>
                                    <p id="note-price-onion">今の売るねだん：--- 円</p>
                                    <textarea class="memo-note" placeholder="メモや計算をしよう！"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="content-price" class="tab-content">
                        <div class="side-panel-box price-chart-box">
                            <div id="chart-container"
                                style="width: 95%; height: 70%; display: flex; justify-content: center; align-items: center;">
                                <canvas id="line"></canvas>
                            </div>

                            <div id="current-prices-container">
                                <div id="price-lettuce" class="current-price-item">🥬: --- 円</div>
                                <div id="price-carrot" class="current-price-item">🥕: --- 円</div>
                                <div id="price-tomato" class="current-price-item">🍅: --- 円</div>
                                <div id="price-onion" class="current-price-item">🧅: --- 円</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="overlay" style="display: none;">
        <div id="overlay-window">
            <div id="alert-section" style="display: none;">
                <h2 style="margin-top: 0;">お知らせ</h2>
                <p id="alert-message" style="font-size: 1.2em; line-height: 1.5;"></p>
                <p style="font-size: 0.8em; color: gray; margin-top: 20px;">(画面のどこかを押すと閉じます)</p>
            </div>

            <div id="result-section" style="display: none;">
                <h2 style="color: #e74c3c; margin-top: 0;">ゲーム終了！</h2>
                <p id="result-message" style="font-size: 1.2em; line-height: 1.5;">結果読み込み中...</p>
                <p style="font-size: 0.8em; color: gray;">(画面のどこかを押すと閉じます)</p>
            </div>

            <div id="help-section" style="display: none; text-align: left;">
                <div>
                    <div id="help-page-1" class="help-page" style="display: block;">
                        <h2 style="color: #27ae60; text-align: center; margin-top: 0;">あそびかた</h2>
                        <div style="font-size: 0.9em; line-height: 1.6;">
                            <p><strong>目的：</strong> 12ヶ月（1年間）で、できるだけ多くのお金を稼ごう！</p>
                            <hr>
                            <p><strong>1. たねを買う</strong><br>
                                「マーケット」で野菜の種を選んで買います。<br>
                                野菜によって「育つまでの時間」と「買うねだん」が違います。</p>
                            <p><strong>2. 育てる</strong><br>
                                畑のあいているところをタッチして種を植えます。<br>
                                「次の月へ」を押すと、時間が進んで野菜が育ちます。</p>
                            <p><strong>3. 売る（しゅうかく）</strong><br>
                                育ちきった野菜を「しゅうかく」すると、自動的に売られてお金になります。<br>
                                <span style="color: #e74c3c;">※「売るねだん」は毎月変わるよ！安くなっているときは注意！</span>
                            </p>
                        </div>
                    </div>

                    <div id="help-page-2" class="help-page" style="display: none;">
                        <img src="Images/Slide/1.png" alt="あそびかた画像1" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-3" class="help-page" style="display: none;">
                        <img src="Images/Slide/2.png" alt="あそびかた画像2" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-4" class="help-page" style="display: none;">
                        <img src="Images/Slide/3.png" alt="あそびかた画像3" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-5" class="help-page" style="display: none;">
                        <img src="Images/Slide/4.png" alt="あそびかた画像4" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-6" class="help-page" style="display: none;">
                        <img src="Images/Slide/5.png" alt="あそびかた画像5" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-7" class="help-page" style="display: none;">
                        <img src="Images/Slide/6.png" alt="あそびかた画像6" style="width: 100%; height: auto;">
                    </div>
                    <div id="help-page-8" class="help-page" style="display: none;">
                        <img src="Images/Slide/7.png" alt="あそびかた画像7" style="width: 100%; height: auto;">
                    </div>

                    <button id="help-prev-button" onclick="changeHelpPage(-1)"
                        style="float: left; font-size: 1.5em; background: none; border: none; cursor: pointer;">&#8592;</button>
                    <button id="help-next-button" onclick="changeHelpPage(1)"
                            style="float: right; font-size: 1.5em; background: none; border: none; cursor: pointer;">1/8 &#8594;</button>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="action-button" onclick="document.getElementById('overlay').style.display='none'"
                        style="background-color: #333;">とじる</button>
                    <button class="action-button" onclick="location.reload()"
                        style="background-color: #e74c3c; margin-left: 15px;">タイトルに戻る</button>
                </div>
            </div>

            <div id="hint-section" style="display: none; text-align: left;">
                <h2 style="color: #f39c12; text-align: center; margin-top: 0;">計算のヒント</h2>
                <div style="font-size: 0.9em; line-height: 1.6;">
                    <p>どの野菜を育てると一番もうかるかな？<br>
                        迷ったときは<strong>「1ヶ月あたり の もうけ」</strong>を計算してみよう！</p>

                    <div
                        style="background-color: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; border: 2px solid #ffeeba;">
                        <strong>式：</strong><br>
                        ( 売るねだん － 買うねだん ) ÷ 育つ期間 ＝ 1ヶ月あたりのもうけ
                    </div>

                    <p>例えば...<br>
                        ・買う: 100円、売る: 300円、期間: 2ヶ月 の場合<br>
                        (300 - 100) ÷ 2 = <strong>100円 (1ヶ月あたり)</strong></p>

                    <p>「ノート」を使って計算してみよう！</p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="action-button" onclick="document.getElementById('overlay').style.display='none'"
                        style="background-color: #333;">とじる</button>
                </div>
            </div>
        </div>
    </div>

    <div id="title-screen"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgb(255,255,255); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <h1
            style="font-size: 3em; color: #27ae60; margin-bottom: 20px; text-shadow: 2px 2px 0px #fff, 4px 4px 0px rgba(0,0,0,0.1);">
            くらべるファーム</h1>
        <p style="font-size: 1.2em; color: #555; margin-bottom: 40px;">〜 いちばん もうかる 野菜は どれ？ 〜</p>

        <div style="display: flex; gap: 20px;">
            <button id="btn-start-game" class="action-button"
                style="font-size: 1.5em; padding: 15px 40px; background-color: #e67e22; box-shadow: 0 5px 0 #d35400;">スタート</button>
            <button id="btn-show-help" class="action-button"
                style="font-size: 1.2em; padding: 15px 30px; background-color: #3498db; box-shadow: 0 5px 0 #2980b9;">あそびかた</button>
        </div>
    </div>
    <script src="GAME.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
</body>
</html>